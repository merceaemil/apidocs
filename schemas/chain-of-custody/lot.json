{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "$id": "https://icglr.org/schemas/chain-of-custody/lot.json",
  "title": "MD.12 Lot",
  "description": "Lot entity - The holder of a quantity of minerals that are mined. Central to Chain of Custody (CoC).",
  "type": "object",
  "required": [
    "lot_number",
    "timestamp",
    "creator",
    "mineral",
    "concentration",
    "mass",
    "unit_of_measurement",
    "creator_role",
    "originating_operation",
    "date_sealed",
    "date_shipped"
  ],
  "properties": {
    "lot_number": {
      "$ref": "../core/common.json#/definitions/Identifier",
      "description": "Lot number given by the CoC actor from which the lot originates"
    },
    "timestamp": {
      "$ref": "../core/common.json#/definitions/DateTime",
      "description": "Date+time when the registration was created - automatically generated by the software system"
    },
    "creator": {
      "$ref": "../core/common.json#/definitions/BusinessEntity",
      "description": "MD.04 Business Entity - Lot Creator - The business entity that created the lot. Equivalent to current custodian."
    },
    "mineral": {
      "$ref": "../core/common.json#/definitions/MineralCode",
      "description": "MDC.03 Mineral - Identifier of the mineral contained in the bag"
    },
    "concentration": {
      "$ref": "../core/common.json#/definitions/Decimal",
      "description": "Percentual concentration - Approximate concentration (%)"
    },
    "mass": {
      "$ref": "../core/common.json#/definitions/Decimal",
      "description": "Lot weight - Weight of the Lot"
    },
    "package_type": {
      "type": "string",
      "description": "Type of packaging - Describes how the Lot is packaged (as bag, barrel, container, etc)"
    },
    "unit_of_measurement": {
      "type": "string",
      "description": "Bag unit of measurement - The unit of measure shall be chosen from UN/ECE Recommendation NÂ°. 20 'Codes for Units of Measure Used in International Trade'"
    },
    "mine_site_id": {
      "$ref": "../core/common.json#/definitions/MineSiteIdFormat",
      "description": "MD.01 Mine Site - ICGLR Identification number of the mine site where the ore was extracted. REQUIRED when the Originating operation is Production"
    },
    "creator_role": {
      "type": "array",
      "minItems": 1,
      "items": {
        "$ref": "../core/common.json#/definitions/CoCRole"
      },
      "description": "MDC.05 CoC Roles - The role(s) of the entity in the CoC"
    },
    "recipient": {
      "$ref": "../core/common.json#/definitions/BusinessEntity",
      "description": "MD.04 Business Entity - Lot Recipient - The identification of the customer or recipient"
    },
    "originating_operation": {
      "type": "array",
      "minItems": 1,
      "items": {
        "$ref": "../core/common.json#/definitions/OriginatingOperation"
      },
      "description": "MDC.06 Originating operations - The operation(s) that determined the creation of the Lot"
    },
    "input_lot": {
      "type": "array",
      "items": {
        "type": "object",
        "description": "Reference to input lot(s) - Can be full Lot object or just lot_number for reference",
        "properties": {
          "lot_number": {
            "$ref": "../core/common.json#/definitions/Identifier"
          }
        }
      },
      "description": "Lots that form this lot - Collection of lots that were used to aggregate this lot. If there is no transformation, except for changing actors in the CoC, the inputLot is itself. This attribute does not exist for the initial Lot (the one registered at the Mine Site)"
    },
    "tag": {
      "$ref": "./tag.json",
      "description": "MD.11 Tag - Associated tag. REQUIRED when the Originating operation is Production"
    },
    "tax_paid": {
      "type": "array",
      "items": {
        "$ref": "./tax.json"
      },
      "description": "MD.13 Tax - Values and details of all taxes, fees or royalties paid"
    },
    "date_sealed": {
      "$ref": "../core/common.json#/definitions/Date",
      "description": "The date when the lot is sealed"
    },
    "date_shipped": {
      "$ref": "../core/common.json#/definitions/Date",
      "description": "The date when the lot is shipped"
    },
    "purchase_number": {
      "type": "array",
      "items": {
        "$ref": "../core/common.json#/definitions/Identifier"
      },
      "description": "A unique purchase order number for the external purchase, in case it is applicable"
    },
    "purchase_date": {
      "$ref": "../core/common.json#/definitions/Date",
      "description": "The date of the purchase, if applicable"
    },
    "responsible_staff": {
      "type": "string",
      "description": "Name of the responsible staff person(s) who accepted the Designated Mineral Lot and verified the origin. Can be a string including multiple names."
    },
    "date_in": {
      "$ref": "../core/common.json#/definitions/Date",
      "description": "The date when the processor took possession of the lot (does not apply in the first step of the CoC)"
    },
    "transportation_method": {
      "type": "string",
      "description": "The method by which the Lot was transported from mine site to processor"
    },
    "transportation_route": {
      "type": "string",
      "description": "The transportation route used for the shipment of the incoming Lot"
    },
    "transport_company": {
      "type": "string",
      "description": "Transport company responsible for transporting the shipment"
    },
    "export_certificate_id": {
      "$ref": "../core/common.json#/definitions/Identifier",
      "description": "MD.03 Export Certificate - An ICGLR Certificate identifier (serial number), if for export"
    }
  }
}

