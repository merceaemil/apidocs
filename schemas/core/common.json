{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "$id": "https://icglr.org/schemas/core/common.json",
  "title": "ICGLR Common Data Structures",
  "description": "Common data structures used across ICGLR mining sector standards. Based on the semantic model defined in the ICGLR Data Sharing Protocol Standards.",
  "definitions": {
    "ICGLRMemberState": {
      "type": "string",
      "enum": ["AO", "BI", "CD", "CF", "CG", "KE", "RW", "SS", "SD", "TZ", "UG", "ZM"],
      "description": "ICGLR member state ISO 3166-1 alpha-2 code"
    },
    "Date": {
      "type": "string",
      "format": "date",
      "pattern": "^[0-9]{4}-[0-9]{2}-[0-9]{2}$",
      "description": "ISO 8601 date format (YYYY-MM-DD)"
    },
    "DateTime": {
      "type": "string",
      "format": "date-time",
      "description": "ISO 8601 date-time format"
    },
    "Time": {
      "type": "string",
      "pattern": "^[0-9]{6}$",
      "description": "Time format (hhmmss) - extended time: hhmmss, optionally add timezone if needed: hhmmss?(Z|±hhmm)"
    },
    "Decimal": {
      "type": "number",
      "description": "Decimal number"
    },
    "Identifier": {
      "type": "string",
      "description": "A finite sequence of characters that adhere to a format rule, subtype of String"
    },
    "String": {
      "type": "string",
      "description": "A finite sequence of characters"
    },
    "Geolocalization": {
      "type": "object",
      "description": "MD.06 Geolocalization - Geographic coordinates",
      "required": ["latitude", "longitude"],
      "properties": {
        "latitude": {
          "type": "number",
          "minimum": -90,
          "maximum": 90,
          "description": "Latitude in WGS 84 format, decimal degrees with 4 decimals"
        },
        "longitude": {
          "type": "number",
          "minimum": -180,
          "maximum": 180,
          "description": "Longitude in WGS 84 format, decimal degrees with 4 decimals"
        }
      }
    },
    "Address": {
      "type": "object",
      "description": "MD.05 Address",
      "required": ["country", "addressLocalityText"],
      "properties": {
        "country": {
          "type": "string",
          "pattern": "^[A-Z]{2}$",
          "description": "An ISO 3166-1 country code. ISO 3166-1 alpha-2 – two-letter country codes. Can be any country, not limited to ICGLR member states (e.g., for importers from outside ICGLR region)"
        },
        "subnationalDivisionL1": {
          "type": "string",
          "description": "Subnational Division Level 1 Code using ISO 3166-2 format (e.g., CD-BU for Bas-Uélé, Lower Uele)"
        },
        "subnationalDivisionL1Text": {
          "type": "string",
          "description": "Subnational Division Level 1 text"
        },
        "subnationalDivisionL2": {
          "type": "string",
          "description": "Subnational Division Level 2"
        },
        "subnationalDivisionL3": {
          "type": "string",
          "description": "Subnational Division Level 3"
        },
        "subnationalDivisionL4": {
          "type": "string",
          "description": "Subnational Division Level 4"
        },
        "addressLocalityText": {
          "type": "string",
          "description": "Locality as free text"
        },
        "addressLocalityCode": {
          "type": "string",
          "description": "Locality as code, as designated in UPU S42, ISO 19160-1"
        }
      }
    },
    "ContactDetails": {
      "type": "object",
      "description": "MD.09 Contact Details",
      "required": ["legalRepresentative", "contactPhoneNumber", "contactEmail"],
      "properties": {
        "legalRepresentative": {
          "type": "string",
          "description": "Legal representative name (First name and last name)"
        },
        "contactPhoneNumber": {
          "type": "string",
          "pattern": "^\\+[1-9]\\d{1,14}$",
          "description": "E.164 phone format, starting with a plus sign (+), followed by the country code, and then the national number, with a maximum of 15 digits"
        },
        "contactEmail": {
          "type": "string",
          "format": "email",
          "pattern": "^[\\w.\\-]+@([\\w-]+\\.)+[\\w-]{2,4}$",
          "description": "Contact email"
        }
      }
    },
    "BusinessEntity": {
      "type": "object",
      "description": "MD.04 Business Entity",
      "required": ["identifier", "name", "tin", "contactDetails"],
      "properties": {
        "identifier": {
          "$ref": "#/definitions/Identifier",
          "description": "Unique identifier"
        },
        "name": {
          "type": "string",
          "description": "Legal name of the entity, as officially registered"
        },
        "legalAddress": {
          "$ref": "#/definitions/Address",
          "description": "Legal Address (0..1, optional). Either Legal Address or Physical Address should exist."
        },
        "physicalAddress": {
          "$ref": "#/definitions/Address",
          "description": "Physical Address (0..1, optional). Either Legal Address or Physical Address should exist."
        },
        "tin": {
          "$ref": "#/definitions/Identifier",
          "description": "Tax ID Number in the country of registration. If not known, N/A can be used as value"
        },
        "contactDetails": {
          "$ref": "#/definitions/ContactDetails",
          "description": "MD.09 Contact Details - Group of business terms holding contact details of entity"
        }
      }
    },
    "CertificationStatus": {
      "type": "integer",
      "enum": [0, 1, 2, 3],
      "description": "MDC.01 Certification Status: 0=Blue (Uninspected), 1=Green (Certified), 2=Yellow (Yellow-Flagged), 3=Red (Un-Certified)"
    },
    "MiningActivityStatus": {
      "type": "integer",
      "enum": [0, 1, 2],
      "description": "MDC.02 Mining Activity Status: 0=Abandoned, 1=Active, 2=Non-active"
    },
    "MineralCode": {
      "type": "string",
      "description": "MDC.03 Mineral - HS Code (primary) or IMA Code. For designated minerals: 7108.12.00 (Gold/IMA1960-A), 2609.00.00 (Cassiterite/IMA1960-001), 2611.00.00 (Wolframite/IMA2000-014), 2615.90.00 (Columbite-Tantalite/IMA1979-A)"
    },
    "UnitOfMeasurement": {
      "type": "string",
      "enum": ["TNE", "KGM"],
      "description": "MDC.07 Unit of measurement - TNE (tonne), KGM (kilogram). The unit of measure shall be chosen from the lists in UN/ECE Recommendation N°. 20 'Codes for Units of Measure Used in International Trade'"
    },
    "LicenseType": {
      "type": "string",
      "enum": ["claim", "exploration_permit", "mining_license", "artisanal_permit", "unlicensed", "other"],
      "description": "MDC.04 License Type"
    },
    "CoCRole": {
      "type": "integer",
      "enum": [1, 2, 3, 4, 5, 6, 7, 8],
      "description": "MDC.05 CoC Roles: 1=Miner, 2=Trader (in-country), 3=Shipper, 4=Processor, 5=Warehouse, 6=Importer, 7=Exporter, 8=Government"
    },
    "OriginatingOperation": {
      "type": "integer",
      "enum": [1, 2, 3, 4, 5, 6, 7, 8],
      "description": "MDC.06 Originating operations: 1=Production, 2=Purchase, 3=Combination, 4=Processing, 5=Transportation, 6=Storage/Warehousing, 7=Import, 8=Export"
    },
    "MineSiteIdFormat": {
      "type": "string",
      "pattern": "^[A-Z]{2}-[+-]?[0-9]+\\.[0-9]{4}[+-][0-9]+\\.[0-9]{4}-[0-9]+$",
      "description": "ICGLR Mine Site ID format: CC-[Lat]-[Long]-NNNNN (e.g., RW-1.9641+30.0619-12345)"
    }
  }
}
